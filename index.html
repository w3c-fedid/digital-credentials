<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      Digital Credentials
    </title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c" class=
    "remove"></script>
    <script class="remove">
    "use strict";
    // See https://github.com/w3c/respec/wiki/ for how to configure ReSpec
    var respecConfig = {
      github: "w3c-fedid/digital-credentials",
      editors: [
        {
          name: "Marcos Caceres",
          email: "marcosc@apple.com",
          company: "Apple Inc.",
          companyURL: "https://apple.com",
        },
        {
          name: "Tim Cappalli",
          email: "tim.cappalli@okta.com",
          company: "Okta",
          companyURL: "https://okta.com",
        },
        {
          name: "Mohamed Amir Yosef",
          email: "mamir@google.com",
          company: "Google Inc.",
          companyURL: "https://google.com",
        },
        {
          name: "Sam Goto",
          email: "goto@google.com",
          company: "Google Inc.",
          companyURL: "https://google.com",
          retiredDate: "2025-05-02",
        },
        // Add additional editors here.
        // https://github.com/w3c/respec/wiki/editors
      ],
      latestVersion: null,
      shortName: "digital-credentials",
      specStatus: "ED",
      edDraftURI: "https://w3c-fedid.github.io/digital-credentials/",
      group: "fedid",
      github: "https://github.com/w3c-fedid/digital-credentials",
      localBiblio: {
        "credential-considerations": {
          title: "User considerations for credentials on the Web",
          href: "https://github.com/w3c/credential-considerations/blob/main/credentials-considerations.md",
          authors: ["Nick Doty", "Rick Byers"],
          date: "2025-03-26",
          publisher: "W3C"
        },
        "threat-model-decentralized-identities": {
          title: "Threat Model for Decentralized Identities",
          href: "https://github.com/w3c-cg/threat-modeling/blob/main/models/decentralized-identities.md",
          authors: ["Simone Onofri"],
          date: "2025-05-28",
          publisher: "W3C"
        },
      },
      xref: {
        profile: "web-platform",
      },
    };
    </script>
  </head>
  <body data-cite="credential-management-1 vc-data-model">
    <section id="abstract">
      <p>
        This document specifies an API to enable [=user agents=] to mediate
        presentation and issuance of digital credentials such as a driver's
        license, government-issued identification card, and/or [=credential
        type examples|other types of digital credential=]. The API builds on
        [[[credential-management-1]]] as a means by which to request or issue a
        digital credential from a user agent or underlying platform.
      </p>
    </section>
    <section id="sotd">
      <p>
        This is an unofficial proposal.
      </p>
    </section>
    <h2>
      Introduction
    </h2>
    <p>
      This document defines an API enabling a website to request presentation
      and issuance of a [=digital credential=].
    </p>
    <p>
      The API design is agnostic to both credential [=digital
      credential/presentation requests|presentation=] [=digital
      credential/exchange protocols=], credential [=digital credential/issuance
      request|issuance=] [=digital credential/issuance protocols|protocols=]
      and credential formats. However, to promote interoperability this
      document includes a [[[#protocol-registry]]].
    </p>
    <p>
      The API is designed to support the following goals:
    </p>
    <ul>
      <li>Keep the acts of [=digital credential/presentation
      requests|requesting=] and [=digital credential/issuance
      requests|issuing=] separate from the specific [=digital
      credential/exchange protocol=] and [=digital credential/issuance
      protocol=] respectively; thereby enabling the extensibility of such
      protocols and credential formats.
      </li>
      <li>Require [=digital credential/presentation requests=] and [=digital
      credential/issuance requests=] to be unencrypted, enabling user-agent
      inspection for risk analysis.
      </li>
      <li>Assume opaque (i.e., encrypted) [=digital credential/presentation
      responses=] and [=digital credential/issuance responses=], enabling
      issuers, verifiers, and holders to control where potentially sensitive
      personally identifiable information is exposed.
      </li>
      <li>Require [=transient activation=] to perform [=digital
      credential/presentation requests=] or [=digital credential/issuance
      requests=], ensuring that sites cannot silently query for nor issue
      digital credentials, nor communicate with wallet providers, without the
      user's active participation and confirmation of each action.
      </li>
      <li>Enable platform-provided credential selection UX when multiple wallet
      applications have credentials that match a [=digital
      credential/presentation request=].
      </li>
      <li>Enable platform-provided wallet selection UX when multiple wallet
      applications support an [=digital credential/issuance request=].
      </li>
      <li>Enable platforms to provide secure cross-device [=digital
      credential/presentation requests=] and [=digital credential/issuance
      requests=] with proximity checks.
      </li>
    </ul>
    <p id="credential-type-examples">
      [=Digital credentials=] of many types can be presented and issued using
      this API. <dfn data-lt="credential type examples">Examples of these
      types</dfn> include:
    </p>
    <ul>
      <li>a driving license, passport, or other identity card issued by a
      government institution
      </li>
      <li>a travel authorization document issued by an embassy or consulate
      </li>
      <li>a proof of employment issued by a public or private organization
      </li>
      <li>a proof of education or professional training issued by an
      institution
      </li>
      <li>and many other scenarios as described in <a href=
      "https://www.w3.org/TR/vc-use-cases/">Verifiable Credentials Use
      Cases</a>
      </li>
    </ul>
    <h2>
      Model
    </h2>
    <p class="note" title="Definitions under discussion">
      The goal of the definitions in this section is to reuse or establish
      terminology that is common across a variety of digital credential formats
      and protocols. Discussions surrounding these definitions are active and
      the definitions are likely to change over the next several months.
    </p>
    <dl class="definitions" data-sort="" data-cite="vc-data-model-2.0">
      <dt>
        <dfn>Digital credential</dfn>
      </dt>
      <dd>
        A cryptographically signed digital document containing one or more
        [=claims=] made by an [=issuer=] about one or more [=subjects=].
        <p class="note" title="Focus on digital credentials about people">
          This specification is currently focused on digital credentials
          pertaining to people.
        </p>
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential" data-local-lt=
        "presentation">Presentation request</dfn>
      </dt>
      <dd>
        A presentation request is a request for a [=digital credential=]
        composed of [=digital credential/request data=] and a [=digital
        credential/exchange protocol=].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential">request data</dfn>
      </dt>
      <dd>
        A format that [=verifier=] software or a [=user agent=] uses, via an
        [=digital credential/exchange protocol=], to request a [=digital
        credential=] from a [=holder=].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential" data-local-lt=
        "presentation response">Presentation response</dfn>
      </dt>
      <dd>
        A format that a [=holder's=] software, such as a digital wallet, uses,
        via an [=digital credential/exchange protocol=], to respond to a
        [=digital credential/presentation request=] by a [=verifier=].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential" data-local-lt=
        "issuance">Issuance request</dfn>
      </dt>
      <dd>
        An issuance request is a request to issue a [=digital credential=]
        composed of some [=digital credential/issuance request data=] and an
        [=digital credential/issuance protocol=].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential">issuance request data</dfn>
      </dt>
      <dd>
        A data structure that an [=issuer=] or a [=user agent=], via an
        [=digital credential/issuance protocol=], to request the issuance of a
        [=digital credential=] by an [=issuer=].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential">Issuance response</dfn>
      </dt>
      <dd>
        A format that [=holder=] uses, via an [=digital credential/issuance
        protocol=], to respond to an [=digital credential/issuance request=] by
        an [=issuer=].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential" data-local-lt=
        "exchange protocol">Exchange protocol</dfn>
      </dt>
      <dd>
        A protocol used for exchanging a [=digital credential=] between a
        [=holder=] and a [=verifier=]. See section [[[#protocol-registry]]].
      </dd>
      <dt>
        <dfn data-dfn-for="digital credential" data-local-lt=
        "issuance protocol">Issuance protocol</dfn>
      </dt>
      <dd>
        A protocol used for communication between an [=issuer=] and a
        [=holder=] during the issuance of a [=digital credential=]. See section
        [[[#protocol-registry]]].
      </dd>
    </dl>
    <h2>
      Scope
    </h2>
    <p>
      The following items are within the scope of this specification:
    </p>
    <ul>
      <li>Requesting a [=digital credential=], including mechanisms for secure
      presentation.
      </li>
      <li>Requesting issuance of a [=digital credential=].
      </li>
      <li>Ensuring that when an API call is made, the website does not learn
      anything about the a holder's [=digital credentials=] or their software
      unless the [=user agent=] has previously received user consent.
      </li>
      <li>Ensuring that any installed application software will not learn
      anything about a given [=request=] unless the [=holder=] explicitly
      consents to use that software.
      </li>
    </ul>
    <p>
      The following items are out of scope:
    </p>
    <ul>
      <li>UI/UX considerations, with the exception of privacy considerations,
      which are addressed to ensure the protection of user data during the
      request process.
      </li>
    </ul>
    <h2>
      Extensions to `CredentialRequestOptions` dictionary
    </h2>
    <pre class="idl">
    partial dictionary CredentialRequestOptions {
      DigitalCredentialRequestOptions digital;
    };
    </pre>
    <h3>
      The `digital` member
    </h3>
    <p>
      The <dfn data-dfn-for="CredentialRequestOptions">digital</dfn> member
      allows for options to configure the request for a [=digital credential=].
    </p>
    <h2>
      The `DigitalCredentialRequestOptions` dictionary
    </h2>
    <pre class="idl">
    dictionary DigitalCredentialRequestOptions {
      sequence&lt;DigitalCredentialGetRequest&gt; requests;
    };
    </pre>
    <h3>
      The `requests` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredentialRequestOptions">requests</dfn>
      specify an [=digital credential/exchange protocol=] and [=digital
      credential/request data=], which the user agent MAY match against a
      holder's software, such as a digital wallet.
    </p>
    <h2>
      The `DigitalCredentialGetRequest` dictionary
    </h2>
    <p>
      The {{DigitalCredentialGetRequest}} dictionary represents a [=digital
      credential/presentation request=]. It is used to specify an [=digital
      credential/exchange protocol=] and some [=digital credential/request
      data=], which the user agent MAY match against software used by a holder,
      such as a digital wallet.
    </p>
    <pre class="idl">
      dictionary DigitalCredentialGetRequest {
        required DOMString protocol;
        required object data;
      };
      </pre>
    <h3>
      The `protocol` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredentialGetRequest">protocol</dfn> member
      denotes the [=digital credential/exchange protocol=].
    </p>
    <p>
      The {{DigitalCredentialCreateRequest/protocol}} member's value can be one
      of the well-defined protocol identifiers defined in
      [[[#protocol-registry]]] or a custom protocol identifier.
    </p>
    <h3>
      The `data` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredentialGetRequest">data</dfn> member is
      the [=digital credential/request data=] to be handled by the holder's
      credential provider, such as a digital identity wallet.
    </p>
    <h2>
      Extensions to `CredentialCreationOptions` dictionary
    </h2>
    <pre class="idl">
    partial dictionary CredentialCreationOptions {
      DigitalCredentialCreationOptions digital;
    };
    </pre>
    <h3>
      The `digital` member
    </h3>
    <p>
      The <dfn data-dfn-for="CredentialCreationOptions">digital</dfn> member
      allows for options to configure the issuance of a [=digital credential=].
    </p>
    <h2>
      The `DigitalCredentialCreationOptions` dictionary
    </h2>
    <pre class="idl">
    dictionary DigitalCredentialCreationOptions {
      sequence&lt;DigitalCredentialCreateRequest&gt; requests;
    };
    </pre>
    <h3>
      The `requests` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredentialCreationOptions">requests</dfn>
      specify an [=digital credential/issuance protocol=] and [=digital
      credential/request data=], which the user agent MAY forward to a
      [=holder=].
    </p>
    <h2>
      The `DigitalCredentialCreateRequest` dictionary
    </h2>
    <p>
      The {{DigitalCredentialCreateRequest}} dictionary represents an [=digital
      credential/issuance request=]. It is used to specify an [=digital
      credential/issuance protocol=] and some [=digital credential/request
      data=], to communicate the issuance request between the issuer and the
      holder.
    </p>
    <pre class="idl">
    dictionary DigitalCredentialCreateRequest {
      required DOMString protocol;
      required object data;
    };
    </pre>
    <h3>
      The `protocol` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredentialCreateRequest">protocol</dfn>
      member denotes the [=digital credential/issuance protocol=].
    </p>
    <p>
      The {{DigitalCredentialCreateRequest/protocol}} member's value is be one
      of the well-defined keys defined in [[[#protocol-registry]]] or any other
      custom one.
    </p>
    <h3>
      The `data` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredentialCreateRequest">data</dfn> member
      is the [=digital credential/request data=] to be handled by the holder's
      credential provider, such as a digital identity wallet.
    </p>
    <h2>
      The `DigitalCredential` interface
    </h2>
    <p>
      The <dfn>DigitalCredential</dfn> interface represents a conceptual
      [=digital credential=].
    </p>
    <p>
      [=User mediation=] is always
      {{CredentialMediationRequirement/"required"}}. [=Request a
      credential|Requesting a DigitalCredential credential=] does not support
      {{CredentialMediationRequirement/"conditional"}},
      {{CredentialMediationRequirement/"optional"}}, or
      {{CredentialMediationRequirement/"silent"}} [=user mediation=]. If
      {{CredentialsContainer/get()}} is called with anything other than
      {{CredentialMediationRequirement/"required"}}, a {{TypeError}} will be
      thrown.
    </p>
    <pre class="idl">
    [Exposed=Window, SecureContext]
    interface DigitalCredential : Credential {
      readonly attribute DOMString protocol;
      [SameObject] readonly attribute object data;
    };
    </pre>
    <p>
      {{DigitalCredential}} instances are [=Credential/origin bound=].
    </p>
    <h3>
      The `protocol` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredential">protocol</dfn> member is the
      [=digital credential/exchange protocol=] that was used to request the
      [=digital credential=], or the [=digital credential/issuance protocol=]
      that was used to issue the [=digital credential=].
    </p>
    <h3>
      The `data` member
    </h3>
    <p>
      The <dfn data-dfn-for="DigitalCredential">data</dfn> member is the
      credential's response data. It contains the subset of JSON-parseable
      object types.
    </p>
    <h2>
      Integration with Credential Management API
    </h2>
    <aside class="issue" data-number="65"></aside>
    <h3>
      [[\DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)
      internal method
    </h3>
    <p>
      When invoked, the <dfn class="export" data-dfn-for=
      "DigitalCredential">[[\DiscoverFromExternalSource]](origin, options,
      sameOriginWithAncestors)</dfn> internal method MUST:
    </p>
    <ol class="algorithm">
      <li>Let |global| be [=this=]'s [=relevant global object=].
      </li>
      <li>Let |document| be |global|'s [=associated `Document`=].
      </li>
      <li>If |document| is not a [=Document/fully active descendant of a
      top-level traversable with user attention=], [=exception/throw=]
      {{"NotAllowedError"}} {{DOMException}}.
      </li>
      <li>If |window| does not have [=transient activation=],
      [=exception/throw=] {{"NotAllowedError"}} {{DOMException}}.
      </li>
      <li>[=Consume user activation=] of |window|.
      </li>
      <li>Let |requests| be |options|'s {{CredentialRequestOptions/digital}}'s
      {{DigitalCredentialRequestOptions/requests}} member.
      </li>
      <li>If |requests| is empty, [=exception/throw=] a {{TypeError}}.
      </li>
      <li>
        <aside class="issue">
          Details of how to actually get the [=digital credential=] are
          forthcoming.
        </aside>
      </li>
      <li>Return a {{DigitalCredential}}.
      </li>
    </ol>
    <h3>
      [[\Store]](credential, sameOriginWithAncestors) internal method
    </h3>
    <p>
      When invoked, the <dfn class="export" data-dfn-for=
      "DigitalCredential">[[\Store]](credential, sameOriginWithAncestors)</dfn>
      MUST call the default implementation of {{Credential}}'s
      {{Credential/[[Store]](credential, sameOriginWithAncestors)}} internal
      method with the same arguments.
    </p>
    <h3>
      [[\Create]](origin, options, sameOriginWithAncestors) internal method
    </h3>
    <p>
      When invoked, the <dfn class="export" data-dfn-for=
      "DigitalCredential">[[\Create]](origin, options,
      sameOriginWithAncestors)</dfn> internal method, if the user agent doesn't
      support issuance, call the default implementation of {{Credential}}'s
      {{Credential/[[Create]](origin,options, sameOriginWithAncestors)}}
      internal method with the same arguments. Otherwise:
    </p>
    <ol class="algorithm">
      <li>Let |global| be [=this=]'s [=relevant global object=].
      </li>
      <li>Let |document| be |global|'s [=associated `Document`=].
      </li>
      <li>If |document| is not a [=Document/fully active descendant of a
      top-level traversable with user attention=], [=exception/throw=]
      {{"NotAllowedError"}} {{DOMException}}.
      </li>
      <li>If |window| does not have [=transient activation=],
      [=exception/throw=] {{"NotAllowedError"}} {{DOMException}}.
      </li>
      <li>[=Consume user activation=] of |window|.
      </li>
      <li>Let |requests| be |options|'s {{CredentialCreationOptions/digital}}'s
      {{DigitalCredentialCreationOptions/requests}} member.
      </li>
      <li>If |requests| is empty, [=exception/throw=] a {{TypeError}}.
      </li>
      <li>
        <aside class="issue">
          Details of how to actually issue the [=digital credential=] are
          forthcoming.
        </aside>
      </li>
      <li>Return a newly constructed {{DigitalCredential}} with
      {{DigitalCredential/protocol}} initialized to the protocol that was used
      to issue this credential, and {{DigitalCredential/data}} initialized to
      an [=digital credential/issuance response=] defined by that [=digital
      credential/issuance protocol=].
      </li>
    </ol>
    <h3>
      [[\type]] internal slot
    </h3>
    <p>
      The {{DigitalCredential}} [=interface object=] has an internal slot named
      <dfn class="export" data-dfn-for="DigitalCredential">[[\type]]</dfn>
      whose value is "digital".
    </p>
    <h3>
      [[\discovery]] internal slot
    </h3>
    <p>
      The {{DigitalCredential}} [=interface object=] has an internal slot named
      <dfn class="export" data-dfn-for="DigitalCredential">[[\discovery]]</dfn>
      whose value is "remote".
    </p>
    <section class="informative">
      <h3>
        User permission
      </h3>
      <p data-cite="permissions">
        The <cite>Digital Credential API</cite> is a [=powerful feature=] that
        requires [=express permission=] from an end-user. This requirement is
        normatively enforced when calling {{CredentialsContainer}}'s
        {{CredentialsContainer/get()}} method.
      </p>
    </section>
    <section id="permissions-policy" data-cite="permissions-policy">
      <h2>
        Permissions Policy integration
      </h2>
      <p>
        This specification defines a [=policy-controlled feature=] identified
        by the string <dfn class="permission">"digital-credentials-get"</dfn>.
        Its [=policy-controlled feature/default allowlist=] is [=default
        allowlist/'self'=].
      </p>
    </section>
    <h2 id="protocol-registry">
      Registry of protocols
    </h2>
    <p>
      Initiating the registration a protocol is done by <a href=
      "https://github.com/w3c-fedid/digital-credentials/issues">filing an
      issue</a> in our GitHub repository.
    </p>
    <p>
      The following is the registry of [=digital credential/exchange
      protocols=] and [=digital credential/issuance protocols=] that are
      supported by this specification.
    </p>
    <p class="note" title="Official Registry" data-cite="w3c-process">
      It is expected that this registry will be become a [=W3C registry=] in
      the future.
    </p>
    <h3>
      General inclusion criteria
    </h3>
    <aside class="note">
      The below criteria are a work in progress and are likely to change as
      this document evolves.
    </aside>
    <p>
      To be included in the registry, the [=digital credential/exchange
      protocol=]:
    </p>
    <ol>
      <li>MUST be standardized at a <a href=
      "https://www.w3.org/liaisons/">consortium the W3C liaises with</a>
      </li>
      <li>MUST be defined in a specification which is freely and publicly
      available at the stable URL listed in the registry.
      </li>
      <li>MUST define a representation, as either a [[WebIDL]] [=dictionary=]
      or a JSON object, of the [=digital credential/exchange protocol=] request
      structure (i.e., the [=dictionary=] which defines the semantics and
      validation of the {{DigitalCredentialGetRequest}}'s
      {{DigitalCredentialGetRequest/data}} member) and the [=digital
      credential/issuance protocol=] request structure (i.e., the
      [=dictionary=] which defines the semantics and validation of the
      {{DigitalCredentialCreateRequest}}'s
      {{DigitalCredentialCreateRequest/data}} member).
      </li>
      <li>MUST define a representation, as either a [[WebIDL]] [=dictionary=]
      or a JSON object, of the [=digital credential/exchange protocol=]
      response structure (i.e., the [=dictionary=] which defines the semantics
      and validation of the {{DigitalCredential}}'s {{DigitalCredential/data}}
      member.
      </li>
      <li>MUST define validation rules for members of the request and response
      structures.
      </li>
      <li>MUST have undergone privacy review by the W3C's <a href=
      "https://www.w3.org/Privacy/IG/">Privacy Interest Group</a> and
        <a href="https://www.w3.org/groups/wg/fedid/">Federated Identity
        Working Group</a>.
        <aside class="note" title="Organizing reviews">
          Once an expression of registration is received via GitHub, the
          registry maintainers will organize the privacy review with the
          <a href="https://www.w3.org/Privacy/IG/">Privacy Interest Group</a> .
          Please see the [[[[security-privacy-questionnaire]]] for the kind of
          questions that will be asked of the protocol you are registering.
        </aside>
      </li>
      <li>MUST have undergone security review by the <a href=
      "https://www.w3.org/groups/ig/security/">Security Interest Group</a>.
      </li>
      <li>MUST have implementation commitment from at least one browser engine,
      one credential provider/wallet, and one issuer or verifier (depending on
      the protocol type). Each component MUST be from independent
      organizations.
      </li>
      <li>MUST have formally recorded consensus by the Federated Identity
      Working Group to be included in the registry.
      </li>
    </ol>
    <h4>
      Presentation-specific inclusion criteria
    </h4>
    <p>
      To be included as a presentation protocol in the registry (used with
      `navigator.credentials.get`), the [=digital credential/exchange
      protocol=]:
    </p>
    <ol>
      <li>MUST support response encryption.
      </li>
      <li>MUST encrypt any response containing personally identifiable
      information (PII).
      </li>
    </ol>
    <h3>
      Change process
    </h3>
    <p>
      To add a new [=digital credential/exchange protocol=] to the registry, or
      to update an existing one:
    </p>
    <dl>
      <dt>
        Define a <dfn data-dfn-for="registry" data-local-lt=
        "identifier">protocol identifier</dfn>.
      </dt>
      <dd>
        The protocol identifier MUST be a unique string that is not already in
        use in the registry. Use only lowercase ASCII letters, digits, and
        hyphens (e.g., "protocol", "the-protocol"). The protocol identifier
        MUST uniquely define the set of required parameters and/or behavior
        that a digital credential provider implementation needs to support to
        successfully handle the request. If the set of required parameters or
        behaviors is updated in a way which would require a digital credential
        provider to also require an update to remain functional, a new protocol
        identifier MUST be assigned and be added to the registry.
      </dd>
      <dt>
        Specify a <dfn data-dfn-for="registry" data-local-lt="type">protocol
        type</dfn>.
      </dt>
      <dd>
        The protocol type is either "Presentation" for presentation protocols
        used with `navigator.credentials.get` or "Issuance" for issuance
        protocols used with `navigator.credentials.create`.
      </dd>
      <dt>
        <dfn data-dfn-for="registry" data-local-lt="description">Describe the
        protocol</dfn>.
      </dt>
      <dd>
        The description MUST be a brief summary of the protocol's purpose and
        use case.
      </dd>
      <dt>
        Provide a <dfn data-dfn-for="registry" data-local-lt="link">link to the
        specification</dfn>.
      </dt>
      <dd>
        The specification MUST be a stable URL that points to the authoritative
        source for the protocol, including validation rules.
      </dd>
    </dl>
    <p>
      [=User agents=] MUST support the following [=digital credential/exchange
      protocols=]:
    </p>
    <table class="data">
      <caption>
        Table of officially registered [=digital credential/exchange
        protocols=].
      </caption>
      <thead>
        <tr>
          <th>
            [=registry/identifier|Protocol identifier=]
          </th>
          <th>
            [=registry/Type=]
          </th>
          <th>
            [=registry/Description=]
          </th>
          <th>
            [=registry/link|Specification=]
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="3">
            Coming soon...
          </td>
        </tr>
      </tbody>
    </table>
    <section class="informative">
      <h2>
        Security Considerations
      </h2>
      <div class="issue" title=
      "Security Considerations section is a work in progress">
        <p>
          This section is a work in progress as this document evolves.
        </p>
        <p>
          The documents listed below outline initial security considerations
          for Digital Credentials, both broadly and for presentation on the
          web. Their contents will be integrated into this document gradually.
        </p>
        <ul>
          <li>
            <a href=
            "https://github.com/WICG/digital-credentials/blob/main/horizontal-reviews/security-privacy.md">
            TAG Security and Privacy Considerations Questionnaire (WIP)</a>
          </li>
          <li>
            <a href=
            "https://github.com/w3c-cg/threat-modeling/blob/main/models/decentralized-identities.md">
            Threat Model for Decentralized Identities</a>
          </li>
        </ul>
      </div>
      <section>
        <h3>
          Credential Protocols
        </h3>
        <p class="issue" title="Work in progress">
          Explain that while the API provides security at the browser API
          level, that security for the underlying credential issuance or
          presentation protocol is a separate concern and that developers need
          to understand that layer of the stack to get a total picture of the
          protections that are in place during any given transaction.
        </p>
      </section>
      <section>
        <h3>
          Cross-device Protocols
        </h3>
        <p class="issue" title="Work in progress">
          Explain that cross-device issuance or presentation uses a separate
          protocol that has its own security characteristics.
        </p>
      </section>
      <section>
        <h3>
          Quishing
        </h3>
        <p class="issue" title="Work in progress">
          Explain that the API is designed to avoid the problem of quishing
          (phishing via QR Codes) and other QR Code and non-browser API-based
          attacks and to be aware of exposure of QR Codes during digital
          credential interactions.
        </p>
      </section>
      <section>
        <h3>
          Data Integrity
        </h3>
        <p class="issue" title="Work in progress">
          Explain that the API does not provide data integrity on the digital
          credential requests or responses and that responsibility is up to the
          underlying protocol used for the request or response.
        </p>
      </section>
      <section>
        <h3>
          Authentication
        </h3>
        <p class="issue" title="Work in progress">
          Explain that authentication (such as a PIN code to unlock) to a
          particular app, such as a digital wallet, that responds to an API
          request is crucial in high-risk use cases.
        </p>
      </section>
      <section>
        <h3>
          Cross-Site Scripting (XSS) and Cross-Site Request Forgery (CSRF)
        </h3>
        <p class="issue" title="Work in progress">
          Explain what attacks are possible via XSS and CSRF, if any.
        </p>
      </section>
      <section>
        <h3>
          Session Security
        </h3>
        <p class="issue" title="Work in progress">
          Explain that once a secure session is established at a website using
          credentials exchanged over this API, that the subsequent security is
          no longer a function of the credential used or this API and is up to
          the session management utilized on the website.
        </p>
      </section>
  <h3 id='threats-and-attacks'>Threats and Attacks</h3>
  <h4 id='same-origin-policy-violations'>Same-Origin Policy Violations</h4>
  <p>SOP violation occurs when a script or resource from one origin breaks the browser's foundational Same-Origin
      Policy, which is intended to segregate data between origins, by accessing or tampering with another origin's data, cookies,
      DOM, or authenticated sessions.</p>
  <h4 id='fingerprinting-and-cross-device-tracking'>Fingerprinting and Cross-Device Tracking</h4>
  <p>Fingerprinting and Cross‑Device Tracking occur when the Digital Credentials API (or its surrounding browser features)
      exposes minute but identifiable configuration details—like supported protocols, hardware capabilities, or timing
      behaviors—that can be collected over time to create a unique fingerprint for a device, user, or browser.</p>
  <p><strong>Mitigations</strong></p>
  <ul>
      <li>Data Minimization</li>
  
  </ul>
  <h4 id='cross-site-scripting-xss-cross-site-request-forgery-csrf'>Cross-Site Scripting (XSS), Cross-Site Request Forgery
      (CSRF)</h4>
  <p>XSS occurs when an attacker injects malicious JavaScript into a web page, enabling that script to silently call the
      API within the context of a trusted site.</p>
  <p>CSRF occurs when a malicious site tricks the user’s browser into sending a silent request to the API on a legitimate,
      origin using hidden forms, images, or fetch calls to forge credential retrieval action.</p>
  <p><strong>Mitigations</strong></p>
  <ul>
      <li>Transient activation (Web API level) </li>
      <li>Permission (Web API level) </li>
      <li>Content Security Policy (RP level)</li>
  
  </ul>
  <h4 id='clickjacking--ui-redressing'>Clickjacking &amp; UI redressing</h4>
  <p>Clickjacking occurs when an attacker invisibly overlays a credential request prompt behind UI elements, tricking
      users into approving unwarranted credential sharing.</p>
  <p><strong>Mitigations</strong></p>
  <ul>
      <li>Transient activation (Web API level) </li>
      <li>Informing the user (Web API level) </li>
      <li>Content Security Policy (RP level)</li>
  
  </ul>
  <h4 id='man-in-the-middle'>Man-In-the-Middle</h4>
  <p>MiTM occurs when attackers insert themselves into the communication channel between two parties, intercepting,
      relaying, or modifying messages at lower layers (like network or transport). At the same time, both endpoints
      believe they are talking directly to each other.</p>
  <p><strong>Mitigations</strong></p>
  <ul>
      <li>Secure contexts (Web API level) </li>
      <li>Encryption (Protocol level) </li>
      <li>Signature (Protocol level) </li>
      <li>Nonce (Protocol level)</li>
  
  </ul>
  <h4 id='reply-attack'>Replay Attack</h4>
  <p>Replay Attacks occur when an attacker intercepts a legitimate credential exchange (via same- or cross-device flows)
      and later replays that same exchange to another party. This tricks systems into accepting old, valid credentials as
      fresh, leading to unauthorized authentication or credential disclosure.</p>
  <p><strong>Mitigations</strong></p>
  <ul>
      <li>Secure contexts (Web API level) </li>
      <li>Nonce (Protocol level)</li>
  
  </ul>
  <h4 id='quishing'>Quishing</h4>
  <p>Quishing occurs when a malicious site tricks the user into replacing a legitimate QR code, tricking it into
      generating a Verifiable Presentation for an unauthorized verifier, enabling impersonation or unauthorized access to
      services or data.</p>
  <h4 id='phishingharvesting'>Phishing/Harvesting</h4>
  <p>Phishing/Harvesting occurs when a malicious site tricks users into sharing credentials by imitating a legitimate
      relying party, potentially harvesting sensitive identity data.</p>
  <h3 id='mitigations'>Mitigations</h3>
  <h4 id='data-minimization'>Data Minimization</h4>
  <p>Data Minimization occurs when the API restricts the information shared to only what’s necessary for each credential
      operation. Such operations must expose the smallest possible dataset—aligned with the specific purpose the user
      explicitly approved—while concealing any additional metadata or details about why data isn't available.</p>
  <p>The API uses the same message if the response is unavailable because of software or hardware limitations, user
      permission, or credentials, ensuring that this lack of availability cannot be used to infer device —or user-specific
      information.</p>
    <p><strong>Threats and Attacks</strong></p>
    <ul>
        <li>Fingerprinting and Cross-Device Tracking </li>
    
    </ul>
    <h4 id='explicitly-restrict-the-feature-to-first-party-origins'>Explicitly restrict the feature to first-party origins.
    </h4>
    <p>Limiting this sensitive API to only first-party contexts, where the requesting origin matches the top-level site,
        makes it possible to block third-party content (like ads or embedded widgets) from invoking credential operations.
        This prevents untrusted embedded code from accessing or misusing digital credentials under your site's permission
        and control.</p>
    <p>The API is not available to third-party iframes without a permission policy.</p>
    <h4 id='secure-contexts'>Secure contexts</h4>
    <p>Secure contexts ensure that certain powerful or privacy-sensitive web features are only offered when pages are loaded
        over authenticated, encrypted channels (e.g., HTTPS, or other “potentially trustworthy” schemes like file:// or
        localhost), blocking access from insecure origins.</p>
    <p>The API is only available in a secure context.</p>
    <p><strong>Mitigates</strong> </p>
    <ul>
        <li>MiTM attacks</li>
    
    </ul>
    <h4 id='limit-api-usage'>Limit API usage</h4>
    <p>Implementing multi-layered rate-limiting is essential to prevent API abuse, ensure reliability, and prevent
        credential-related attacks.</p>
    <p><em>Global</em>: A global rate limit should be implemented to restrict the number of requests made within a certain
        period (e.g., per minute or hour), preventing excessive use and over-asking<br /><em>Session-Based</em>: Set
        session-based limits during a single-user session to prevent prolonged abuse.<br /><em>Origin-based</em>: per site
        and subdomains</p>
    <h4 id='informing-the-user'>Informing the user</h4>
    <p>When handling sensitive API calls involving personal data or credentials, including explicit user approval at the
        point of use is important. Instead of allowing background or automated exchanges, the user agent must present a
        clear, interactive prompt, such as a chooser UI, that shows the requesting origin and the data being accessed. This
        ensures users are fully informed and retain control over each operation, significantly reducing risks from silent
        data sharing or unintended leaks.</p>
    <p>The API prompts the user to show the request's origin before proceeding.</p>
    <h4 id='permission-request'>Permission Policy</h4>
    <p>Permission policy allows developers to selectively enable and disable use of various browser features and APIs.</p>
    <p>This API defines a <a href="#permissions-policy">policy-controlled feature</a>, to prevent third-party iframes from calling the API.</p>
    <p><strong>Threats and Attacks</strong></p>
    <ul>
        <li>Fingerprinting and Cross-Device Tracking</li>
    
    </ul>
    <h4 id='transient-activation'>Transient activation</h4>
    <p>Transient activation ensures that powerful or sensitive web features can only be triggered immediately following a
        real user interaction, such as a mouse click, keyboard press, touch, or menu selection, guarding against stealthy or
        automated execution. This mechanism prevents malicious scripts from silently invoking functions like pop‑ups,
        clipboard access, sharing dialogs, or system permissions without the user’s knowledge. </p>
    <p>The API uses transient activation.</p>
    <p><strong>Threats and Attacks</strong></p>
    <ul>
        <li>Cross-Site Scripting (XSS) and Cross-Site Request Forgery (CSRF)</li>
    
    </ul>
    </section>
    <section class="informative">
      <h2>
        Privacy Considerations
      </h2>
      <div class="issue" title=
      "Privacy Considerations section is a work in progress">
        <p>
          This section is a work in progress as this document evolves.
        </p>
      </div>
      <p>
        The Digital Credentials API integrates into a complex ecosystem with
        multiple technology layers and various participants (including but not
        limited to Verifiers, Holders and Issuers), each of which have to
        consider different aspects of user privacy. This specification does not
        attempt to exhaustively list all considerations for the different
        participants. We would like to refer these parties to a variety of
        other resources that explore the digital credentials threat model more
        holistically:
      </p>
      <ul>
        <li>[[[credential-considerations]]]
        </li>
        <li>[[[threat-model-decentralized-identities]]]
        </li>
        <li>
          <a data-cite="vc-data-model#privacy-considerations">VC Data Model
          Privacy Considerations</a>
        </li>
        <li>...
        </li>
      </ul>
      <p>
        Instead, these considerations focus on the Digital Credentials API
        itself, and describe how user agents can satisfy their <a href=
        "https://w3ctag.github.io/privacy-principles/#dfn-user-agent-duties">user
        agent duties</a> in an implementation of the API, taking into account
        the relevant privacy properties of the ecosystem it interacts with.
      </p>
      <p>
        The privacy considerations for digital credentials are not static. They
        will evolve over time as the ecosystem matures, and may be informed by
        the behavior of other actors in the ecosystem, improvements in other
        layers of the stack, new threats to user privacy, as well as changing
        societal norms and regulations.
      </p>
      <p>
        It is expected that the various groups involved in the design and
        implementation of the Digital Credentials API actively monitor the
        evolving privacy landscape and participate in the corresponding
        evolution of the API.
      </p>
      <section data-cite="vc-data-model#spectrum-of-privacy">
        <h3>
          Spectrum of Privacy
        </h3>
        <p>
          The Digital Credentials API serves a variety of use cases with
          different grades of data disclosure and individual users with
          different preferences depending on the context that they are in.
          Notably, the privacy properties of a credential exchange mediated by
          this API could be mandated by the legal and regulatory environment of
          an individual user.
        </p>
        <p>
          This means that some users may not want, or be allowed, to use the
          most privacy-preserving means of exchanging credential information.
          Nonetheless, user agents need to serve users with an experience that
          is private by default and protect them from harm.
        </p>
        <p>
          Because of this spectrum of preferences and use cases, it may be
          difficult for a user agent to discern whether a user means to expose
          their personal information or is being tricked into doing so. It is
          thus the user agent's responsibility to ensure that every user
          understands what data they are sharing and who will participate in
          the exchange of information, before the exchange begins.
        </p>
      </section>
      <section>
        <h3>
          Unnecessary Requests for Credentials
        </h3>
        <p class="issue" title="Work in progress">
          Explain how the API could be used to unnecessarily request digital
          credentials from individuals such as requesting a driver's license to
          log into a movie rating website and how the ecosystem can mitigate
          this risk.
        </p>
      </section>
      <section>
        <h3>
          Over Collection of Data
        </h3>
        <p class="issue" title="Work in progress">
          Explain how the API could be used to request more data than necessary
          for a transaction and how the ecosystem can mitigate that over
          collection.
        </p>
      </section>
      <section>
        <h3>
          Individual Consent
        </h3>
        <p class="issue" title="Work in progress">
          Explain how the API acquires an individual's consent to share a
          digital credential and how digital wallets can also provide further
          consent when sharing information.
        </p>
      </section>
      <section>
        <h3>
          Data Retention
        </h3>
        <p class="issue" title="Work in progress">
          Explain how verifiers might retain data and what the ecosystem does
          to mitigate excessive data retention policies.
        </p>
      </section>
      <section>
        <h3>
          Compliance with Privacy Regulations
        </h3>
        <p class="issue" title="Work in progress">
          Explain to what extent the API complies with known privacy
          regulations (e.g., consent) and what parts of those regulations are
          not possible to enforce via the API (e.g., retention).
        </p>
      </section>
      <section>
        <h3>
          Selective and Unlinkable Disclosure
        </h3>
        <p class="issue" title="Work in progress">
          Explain how selective disclosure and unlinkable disclosure help
          preserve privacy as well as their limitations in doing so.
        </p>
      </section>
      <section>
        <h3>
          Phoning Home
        </h3>
        <p class="issue" title="Work in progress">
          Explain how some systems might "phone home", the impact on privacy
          that might have, and what the ecosystem provides to mitigate the
          risk.
        </p>
      </section>
      <section>
        <h3>
          User Permission and Transparency
        </h3>
        <p class="issue" title="Work in progress"></p>
        <p>
          The Digital Credentials API enables the sharing of highly personal,
          sensitive, and at-risk user information with websites via
          credentials, potentially granting the ability to track users online
          and offline, through permanent, unique, irrevocable, cross-context
          identifiers. It also reveals parts of the user's browsing activity as
          well as their intent to identify to specific websites and/or wallets.
          One crucial responsibility of the user agent in a credential request
          is to gather permission from the user to proceed with the exchange of
          information.
        </p>
        <p>
          Important context details that are needed for a user to make an
          informed decision about proceeding with a credential exchange include
          the following:
        </p>
        <ul>
          <li>The origin of the verifier that requests the credential.
          </li>
          <li>The information that is being requested, or that would be
          revealed by responding to the request.
          </li>
          <li>Whether presenting this information will enable tracking.
          </li>
          <li>Which wallet(s) can be used to fulfill the credential request.
          </li>
          <li>Which credential would be used to share the requested
          information.
          </li>
        </ul>
        <p>
          It is advised that user agents in their implementation ensure that
          the details listed are fully disclosed to the user before an exchange
          of any user-related information occurs.
        </p>
        <p class="issue" data-number="252">
          Should these be normative in the spec?
        </p>
        <p class="issue" data-number="44">
          Should the API be designed so the site can provide in-context
          explanations?
        </p>
        <h4>
          Integrating Multiple User Agents
        </h4>
        <p>
          Depending on the technical architecture of a user's system, it is
          likely that the definition of a "user agent" will include multiple
          cooperating layers of the software stack, such as a browser and the
          operating system. The greatest priority for these layers has to be a
          safe and well-informed user permission experience. As such,
          integration can be vital for user safety. Some layers may hold
          information that is inaccessible by other layers, such as the
          availability of a user's credentials. Overprompting or prompting
          without sufficient context could lead to (exploitable) confusion and
          prompt blindness.
        </p>
        <p>
          For this reason, user agents prompting for permission are encouraged
          to integrate software layers for an ideal user experience, if they
          consider it safe to do so. This could happen, for example, if a
          browser trusts the API contract of an operating system to show an
          appropriate prompt, and thus does not show a prompt itself.
        </p>
        <h4>
          Permission Prior to Wallet Selection
        </h4>
        <p>
          As part of the user permission flow, the user agent needs to ensure
          that users retain the power to choose whether to forward a credential
          request to a wallet, and which wallet to select. This is due to the
          information disclosure that happens as part of the request, and the
          ability of wallets to retain or share this information at the time of
          the request.
        </p>
        <h4>
          Permission vs. Consent
        </h4>
        <p>
          The permission mediated by the user agent is not consent, which has
          specific legal definitions which can vary among different legal and
          regulatory environments and may need to be collected by the digital
          wallet before sharing information with the verifier, or by the
          verifier itself before initiating the request. With frameworks and
          regulations for obtaining consent still being developed, this API
          aims to enable the exchange of the necessary information, which could
          include the following:
        </p>
        <ul>
          <li>The privacy policy of the verifier receiving the credential.
          </li>
          <li>The purpose for which the verifier is requesting the information.
          </li>
          <li>What the information will be used for.
          </li>
          <li>How the information will be shared or retained.
          </li>
          <li>Any evaluations and attestations of this information, if
          available.
          </li>
          <li>Assertions of the verifier's legimitacy and registration for
          accessing the credential, such as <a href=
          "https://github.com/eu-digital-identity-wallet/eudi-doc-architecture-and-reference-framework/blob/main/docs/annexes/annex-2/annex-2-high-level-requirements.md#a2327-topic-27---registration-of-pid-providers-providers-of-qeaas-pub-eaas-and-non-qualified-eaas-and-relying-parties">
            EUDI access and registration certificates</a>.
          </li>
        </ul>
        <p>
          As more of this information becomes available in a structured format,
          we expect user agents and this specification to leverage it to
          improve the user permission experience as well.
        </p>
      </section>
    </section>
    <section class="informative">
      <h2>
        Accessibility Considerations
      </h2>
      <p class="issue" title="Work in Progress">
        This section is a work in progress as this document evolves.
      </p>
    </section>
    <section id="idl-index"></section>
    <section id="conformance"></section>
  </body>
</html>
